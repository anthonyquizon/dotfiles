export EDITOR=vim
#export LANG=en_AU.UTF-8
export OSH=$HOME/.oh-my-bash
##====== GUIX ======
export GUIX_LOCPATH="$HOME/.guix-profile/lib/locale"
export GUIX_PATH="$HOME/.config/guix/current/bin"
export GUIX_PROFILE="$HOME/.guix-profile"
export GUIX_INCLUDE_PATH="$HOME/.guix-profile/lib/locale"
export GUIX_LIBRARY_PATH="$HOME/.guix-profile/lib"

source "$GUIX_PROFILE/etc/profile"

export SSL_CERT_DIR="$HOME/.guix-profile/etc/ssl/certs"
export SSL_CERT_FILE="$HOME/.guix-profile/etc/ssl/certs/ca-certificates.crt"
export CURL_CA_BUNDLE="$HOME/.guix-profile/etc/ssl/certs/ca-certificates.crt"
export GIT_SSL_CAINFO="$SSL_CERT_FILE"

export NPM_PATH="${HOME}/.npm-packages/bin"
export GO_PATH="${HOME}/go/bin"

export VENDOR_NODE_PATH="${HOME}/vendor/node/bin"

export LOCAL_PATH="${HOME}/.bin":"$HOME/.local/bin"
export PATH="$GUIX_PATH:$NPM_PATH:$PATH:$LOCAL_PATH:$GO_PATH:$VENDOR_NODE_PATH"
export INFOPATH="$HOME/.config/guix/current/share/info:$INFOPATH"

export CC=gcc # WORKAROUND dmd doesn't work if this isn't set

alias guile="rlwrap guile"
alias guix-env="guix environment -m manifest.scm"
alias guix-container="guix environment -m manifest.scm --container"
alias guix-pure="guix environment -m manifest.scm --pure"

alias python=python3

ENABLE_CORRECTION="true"
COMPLETION_WAITING_DOTS="true"
OSH_THEME="font"

kill_port() {
  kill $(lsof -t -i:$1)
}

ls_port() {
  lsof -i:$1
}

if [ -n "$GUIX_ENVIRONMENT" ]; then
  #export LD_LIBRARY_PATH=$GUIX_ENVIRONMENT/lib

  OSH_THEME="simple"
fi

if type rg &> /dev/null; then
  export FZF_DEFAULT_COMMAND='rg --files'
fi


completions=(
  git
)

aliases=(
  general
)

plugins=(
  git
  bashmarks
)

alias make="make -j"

source $OSH/oh-my-bash.sh

if [[ -z "$GUIX_ENVIRONMENT" && $- == *i* ]]; then
  [[ $TERM != "screen" ]] && exec tmux -u attach -d
fi

if [ "$TERM" = "screen" ]; then
  export TERM=xterm-256color
fi
